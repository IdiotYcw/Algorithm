# Ubuntu 查看后台进程
ps -e

# 多进程与多线程
### 进程：
进程是指一个程序在给定数据集合上的一次执行过程，是系统进行资源分配和运行调用的独立单位。可以简单地理解为操作系统中正在执行的程序。也就说，每个应用程序都有一个自己的进程。

### 线程：
线程是一个基本的CPU执行单元。它必须依托于进程存活。一个线程是一个execution　context（执行上下文），即一个CPU执行时所需要的一串指令。

### 进程的优点：
- 顺序程序的特点：具有封闭性和可再现性
- 程序的并发执行和资源共享。多道程序设计出现后，实现了程序的并发执行和资源共享，提高了系统的效率和系统的资源利用率。

### 进程的缺点：
- 操作系统调度切换多个线程要比切换调度进程在速度上快的多。而且进程间内存无法共享，通讯也比较麻烦。
- 线程之间由于共享进程内存空间，所以交换数据非常方便在创建或撤消进程时，由于系统都要为之分配和回收资源，导致系统的开销明显大于创建或撤消线程时的开销。
   
 
### 线程的优点：
- 它是一种非常"节俭"的多任务操作方式。在Linux系统下，启动一个新的进程必须分配给它独立的地址空间，建立众多的数据表来维护它的代码段、堆栈段和数据段，这是一种"昂贵"的多任务工作方式。而运行于一个进程中的多个线程，它们彼此之间使用相同的地址空间，共享大部分数据，启动一个线程所花费的空间远远小于启动一个进程所花费的空间，而且，线程间彼此切换所需的时间也远远小于进程间切换所需要的时间。当然，在具体的系统上，这个数据可能会有较大的区别
- 线程间方便的通信机制，由于同一进程下的线程之间共享数据空间，所以一个线程的数据可以直接为其它线程所用，这不仅快捷，而且方便
- 使多CPU系统更加有效。操作系统会保证当线程数不大于CPU数目时，不同的线程运行于不同的CPU上
- 改善程序结构。一个既长又复杂的进程可以考虑分为多个线程，成为几个独立或半独立的运行部分，这样的程序会利于理解和修改。

### 线程的缺点：
- 调度时, 要保存线程状态，频繁调度, 需要占用大量的机时
- 程序设计上容易出错（线程同步问题）。

### 多线程的优点：
- 无需跨进程边界 
- 程序逻辑和控制方式简单 
- 所有线程可以直接共享内存和变量等 
- 线程方式消耗的总资源比进程方式好 

### 多线程缺点：
- 每个线程与主程序共用地址空间，受限于2GB地址空间 
- 线程之间的同步和加锁控制比较麻烦 
- 一个线程的崩溃可能影响到整个程序的稳定性 
- 到达一定的线程数程度后，即使再增加CPU也无法提高性能，例如Windows Server 2003，大约是1500个左右的线程数就快到极限了（线程堆栈设定为1M），如果设定线程堆栈为2M，还达不到1500个线程总数 
- 线程能够提高的总性能有限，而且线程多了之后，线程本身的调度也是一个麻烦事儿，需要消耗较多的CPU 
 
### 多进程优点：
- 每个进程互相独立，不影响主程序的稳定性，子进程崩溃没关系
- 通过增加CPU，就可以容易扩充性能
- 可以尽量减少线程加锁/解锁的影响，极大提高性能，就算是线程运行的模块算法效率低也没关系
- 每个子进程都有2GB地址空间和相关资源，总体能够达到的性能上限非常大

### 多线程缺点：
- 逻辑控制复杂，需要和主程序交互 
- 需要跨进程边界，如果有大数据量传送，就不太好，适合小数据量传送、密集运算 
- 多进程调度开销比较大 

最好是多进程和多线程结合，即根据实际的需要，每个CPU开启一个子进程，这个子进程开启多线程可以为若干同类型的数据进行处理。当然你也可以利用多线程+多CPU+轮询方式来解决问题……
方法和手段是多样的，关键是自己看起来实现方便有能够满足要求，代价也合适。

## 其他文章
[Python多进程与多线程详解](http://www.qingpingshan.com/jb/python/330874.html)  
[Python多线程（threading模块）](https://www.bbsmax.com/A/GBJrYNxEz0/)  
